<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Elarion Wiki</title>
  <link rel="stylesheet" href="style.css">

  <!-- Manifesto para PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0f0f0f">

  <!-- Ícone -->
  <link rel="icon" href="icon-192.png" type="image/png">
</head>
<body>
  <header>
    <h1>📖 Elarion Wiki</h1>
    <input type="text" id="search" placeholder="Buscar personagens, reinos, clãs...">
  </header>

  <!-- CONTROLES -->
  <section id="controls">
    <div class="filters">
      <button class="filter-btn" data-filter="all">Tudo</button>
      <button class="filter-btn" data-filter="Reino">Reinos</button>
      <button class="filter-btn" data-filter="Clã">Clãs</button>
      <button class="filter-btn" data-filter="Personagem">Personagens</button>
      <button class="filter-btn" data-filter="Evento">Eventos</button>
    </div>

    <div class="io">
      <select id="sort">
        <option value="az">A–Z (nome)</option>
        <option value="za">Z–A (nome)</option>
        <option value="recent">Mais recentes</option>
      </select>

      <button id="export-btn">Exportar JSON</button>
      <label for="import-input" class="import-label">Importar JSON</label>
      <input type="file" id="import-input" accept="application/json" hidden>
    </div>
  </section>

  <!-- Formulário de cadastro -->
  <section id="form-section">
    <h2>Adicionar novo item</h2>
    <form id="add-form">
      <input type="text" id="nome" placeholder="Nome" required>

      <!-- Troquei para select (mais prático e evita erro de digitação) -->
      <select id="tipo" required>
        <option value="" disabled selected>Tipo</option>
        <option>Reino</option>
        <option>Clã</option>
        <option>Personagem</option>
        <option>Evento</option>
      </select>

      <textarea id="resumo" placeholder="Resumo"></textarea>

      <!-- Campos dinâmicos por tipo -->
      <div class="bytype" data-for="Reino">
        <input type="text" id="add-reino-continente" placeholder="Continente">
      </div>

      <div class="bytype" data-for="Clã">
        <input type="text" id="add-cla-origem" placeholder="Origem">
      </div>

      <div class="bytype" data-for="Personagem">
        <input type="text" id="add-personagem-reino" placeholder="Reino (texto livre)">
        <input type="text" id="add-personagem-cla" placeholder="Clã (texto livre)">
      </div>

      <div class="bytype" data-for="Evento">
        <input type="text" id="add-evento-data" placeholder="Data (ex: 1023-05-12)">
        <input type="text" id="add-evento-local" placeholder="Local (texto livre)">
      </div>

      <button type="submit">Adicionar</button>
    </form>
  </section>

  <!-- Área de cards -->
  <main id="content"></main>

  <!-- Modal de Edição -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <span id="close-modal" class="close">&times;</span>
      <h2>Editar item</h2>
      <form id="edit-form">
        <input type="text" id="edit-nome" placeholder="Nome" required>

        <select id="edit-tipo" required>
          <option>Reino</option>
          <option>Clã</option>
          <option>Personagem</option>
          <option>Evento</option>
        </select>

        <textarea id="edit-resumo" placeholder="Resumo"></textarea>

        <!-- Campos dinâmicos por tipo (modal) -->
        <div class="bytype-edit" data-for="Reino">
          <input type="text" id="edit-reino-continente" placeholder="Continente">
        </div>

        <div class="bytype-edit" data-for="Clã">
          <input type="text" id="edit-cla-origem" placeholder="Origem">
        </div>

        <div class="bytype-edit" data-for="Personagem">
          <input type="text" id="edit-personagem-reino" placeholder="Reino (texto livre)">
          <input type="text" id="edit-personagem-cla" placeholder="Clã (texto livre)">
        </div>

        <div class="bytype-edit" data-for="Evento">
          <input type="text" id="edit-evento-data" placeholder="Data (ex: 1023-05-12)">
          <input type="text" id="edit-evento-local" placeholder="Local (texto livre)">
        </div>

        <button type="submit">Salvar alterações</button>
      </form>
    </div>
  </div>

  <footer>
    <p>⚡ Enciclopédia de Elarion — Powered by Lorenzo & Chat</p>
  </footer>

  <script src="app.js"></script>
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js");
    }
  </script>
</body>
</html>
